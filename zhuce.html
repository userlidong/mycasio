<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>注册页</title>
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/zhuce.css">
</head>
<body>
    <div class="head">
        <div class="headSmall">
            <img src="img/zhuce/logo.png" alt="">
            <div class="writ">
                <h2>注册成为C's Club的会员</h2>
                <div class="writSmall">
                    <div class="inp">
                        <i class="iconfont icon-shouji1"></i>
                        <input type="text" placeholder="请输入手机号" id="tName" name="username" style="outline:none;">
                    </div>   
                    <span id="spa"></span><br> 
                    <div class="kong">
                        <p>手机号码不能为空</p>
                    </div>

                    <div class="inp inpu">
                            <i class="iconfont icon-dunpai"></i>
                            <input type="text" name="mobile" id="checkpass" placeholder="请输入短信验证码" style="outline:none;">
                    </div>
                    <button>获取验证码</button>
                    <div class="kong">
                        <p>请输入手机验证码</p>
                    </div>

                    <div class="inp">
                            <i class="iconfont icon-ziyuan"></i>
                            <input type="text" placeholder="请输入密码" id="tPwd" name="pass" style="outline:none;">
                            <i class="iconfont icon-jiemao"></i>
                            <i class="iconfont icon-yanjing"></i>
                    </div>
                    <div class="kong">
                        <p>密码不能为空</p>
                    </div>
                    <div class="sel">
                        <input type="checkbox" data-required-error="请您先同意协议" class="chec" style="outline:none;">
                        <span>我已阅读并同意</span>
                        <a href="#">《用户注册协议》</a>
                    </div>

                    <div class="bot">
                        <button type="submit" class="btn">注&nbsp;&nbsp;册</button>
                    </div>
                    
                    <div class="denglu">
                        <a href="http://127.0.0.1:5500/denglu.html">已有账号，去登录</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="foot">
        <div class="footSmall">
            <p>
                <a href="#">C's Club </a>
                &nbsp; &nbsp;| &nbsp; &nbsp;
                <a href="#">帮助中心</a>
                &nbsp; &nbsp;| &nbsp; &nbsp;
                <i class="iconfont icon-zaixiankefu"></i>
                <a href="#">在线客服</a>
                <i class="iconfont icon-dianhua"></i>
                <span>400-700-6655 (周一至周日 9:00-21:00)</span>
            </p>
            <a href="#">卡西欧官方商城</a>
            <span>京ICP备 10009123号-10</span>
        </div>
    </div>
</body>
</html>
<script src="js/jQuery.js"></script>
<script>
    // $("#username").onblur = function (){
    // let xhr =new XMLHttpRequest();

    //2 设置请求参数

    // xhr.open("POST", "zhuce.php", "true");
    //3 设置回调函数
//     xhr.onreadystatechange = function() {
//             if (xhr.readyState == 4 && xhr.status == 200) {
//                 //5.获取响应字符串
//                 if (xhr.responseText == "1") {
//                     $("#spa").innerHTML = "用户名已存在，请重新注册";
//                 } else {
//                     $("#spa").innerHTML = "恭喜注册成功";
//                 }
//             }
//         }
    //4 发送请求
//     xhr.send("username=" + $("#username").value);
// }

// function check(){
//     //非空判断：
//     if($("#username").value=="" || $("#userpass").value=="" || $("#checkpass").value==""){
//         alert("亲，请把带星号的都输入了");
//         return false;//阻止浏览器的默认行为
//     }
    //判断用户名是否符合规则

    //判断密码和重复密码是否一致。
  
// }

    let oUserName = document.getElementById("tName")
	oUserName.onblur = function(){
		//1.创建xhr对象
		let xhr = new XMLHttpRequest();
		//2.以post发送数据给后台,在open后必须设置请求头
		xhr.open("post","php/zhuce.php",true);
		//a.设置请求头
		xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
		//3.设置回调函数
		xhr.onreadystatechange = function(){
			if(xhr.status == 200 && xhr.readyState == 4){
				fun(xhr.responseText);
			}
		}

		//4.发送 
		xhr.send("username="+this.value);
	}
	function fun(str){
		let oSpan = document.querySelector("#spa");
		//前后端分离
		if(str == 1){
			oSpan.innerHTML = "×";
		}else{
			oSpan.innerHTML = "√";
		}
	}
</script>